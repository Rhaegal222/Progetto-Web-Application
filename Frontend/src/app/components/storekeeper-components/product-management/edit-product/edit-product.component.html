<div class="container">
    <div class="content">
        <header>        
            <h1>Modifica Prodotto</h1>
            <!--Croce per chiudere la finestra-->
            <span (click)="onCloseEvent()" class="material-icons close">close</span>
        </header>
        <form>
            <div class="form-group">
                <input type="text" class="form-control" id="name" name="name" [(ngModel)]="name" placeholder="Nome">
            </div>
            <div class="form-group">
                <input 
                    class="form-control"
                    id="category" 
                    name="category"
                    [(ngModel)]="type"
                    placeholder="Categoria"
                    (keyup)="filterCategories($event)" 
                    (blur)="hideSuggestions($event)" 
                    (focus)="showSuggestions('category')">
                <div *ngIf="showCategoriesBox" class="suggestions-container">
                  <ul class="suggestions-list">
                    <li *ngFor="let suggestion of filteredCategories" 
                        (click)="selectCategory(suggestion)">
                        {{ suggestion.name }}
                    </li>
                    </ul>
                </div>
            </div>
            <div class="form-group">
                <textarea class="form-control" id="description" name="description" [(ngModel)]="description" placeholder="Descrizione" rows="4" cols="50"></textarea>
            </div>
            <div class="form-group">
                <label class="form-check">
                    <input type="checkbox" checked="checked" name="assigned" [(ngModel)]="assigned">
                    <span class="checkmark"></span>
                </label>
                <span class="form-check-label">Assegnato</span>
            </div>
            <div *ngIf="assigned" class="form-group">
                <input 
                    class="form-control" 
                    id="location" 
                    name="location"
                    [(ngModel)]="location"
                    placeholder="Posizione"
                    (keyup)="filterLocations($event)" 
                    (blur)="hideSuggestions($event)" 
                    (focus)="showSuggestions('location')">
                <div *ngIf="showLocationsBox" class="suggestions-container">
                    <ul class="suggestions-list">
                        <li *ngFor="let suggestion of filteredLocations" 
                            (click)="selectLocation(suggestion)">
                            {{ suggestion.name }}
                        </li>
                    </ul>
                </div>
            </div>
            <div *ngIf="assigned" class="form-group">
                <input class="form-control" type="text" class="form-control" id="assigned_user" name="assigned_user" [(ngModel)]="assigned_user" placeholder="Email dell'assegnatario">
            </div>
            <div class="form-group">
                <input class="form-control" type="file" id="image" (change)="addImage($event)" accept="image/*">
            </div>
            <div class="form-group">
                <div class="image-preview-box">
                    <div class="image-container">
                        <span *ngIf="image!=''" (click)="removeImage()" class="material-icons remove-image">close</span>
                        <img *ngIf="image!=''" class="image" [src]="image" alt="Immagine caricata">
                    </div>
                </div>
            </div>                        
            <div class="form-group btn-row">
                <button (click)="onCloseEvent()" class="btn btn-primary" type="button">Annulla</button>
                <button (click)="onSave()" class="btn btn-primary" type="button">Salva</button>
            </div>
        </form>
    </div>
</div>
